# ğŸ“‹ ë³µí•© í‚¤ ì‚¬ìš©

í˜„ì¬ ì €í¬ **`ëŸ¬ë‹í•˜ì´`**ì—ì„œëŠ” ê¸°íš ë‹¹ì‹œì— ì¦ê²¨ì°¾ê¸° í…Œì´ë¸”ì„ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ê³„í•˜ì˜€ìŠµë‹ˆë‹¤.
![[image 1.png]]

ì €í¬ëŠ” ORMì„ ì‚¬ìš©í•˜ë¯€ë¡œ JPA ì—°ê´€ ê´€ê³„ë¡œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.
í•œ ëª…ì˜ íšŒì›ì€ ì—¬ëŸ¬ ê²Œì‹œê¸€ì„ ì¦ê²¨ì°¾ê¸° í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. -> **Memberì™€ BookmarkëŠ” 1:N ë‹¨ë°©í–¥ ì—°ê´€ ê´€ê³„**ë¥¼ ê°€ì§‘ë‹ˆë‹¤.
í•˜ë‚˜ì˜ ê²Œì‹œê¸€ì€ ì—¬ëŸ¬ ì‚¬ëŒì´ ì¦ê²¨ì°¾ê¸° í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. -> **Postì™€ BookmarkëŠ” 1:N ë‹¨ë°©í–¥ ì—°ê´€ ê´€ê³„**ë¥¼ ê°€ì§‘ë‹ˆë‹¤.

> ğŸ‰ **Q1. ì¦ê²¨ì°¾ê¸° ì—”í‹°í‹°ì—ì„œ <span style="background-color:#DCFFE4">ë³„ë„ì˜ keyë¥¼ ìƒì„±í•˜ì§€ ì•Šê³  ë³µí•©í‚¤ë¥¼ ì‚¬ìš©í•œ ì´ìœ </span>ê°€ ë¬´ì—‡ì¸ê°€ìš”?**
>
> ì¦ê²¨ì°¾ê¸°ëŠ” ì‚­ì œ ìƒíƒœ ì¹¼ëŸ¼ì„ ë‘ì§€ ì•Šê³  ììœ ë¡­ê²Œ ìƒì„±/ì‚­ì œê°€ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•  ê²ƒì´ë¼ ì˜ˆìƒí–ˆìŠµë‹ˆë‹¤.
> ë³„ë„ì˜ key ê°’ì„ ê°€ì§„ë‹¤ë©´, Auto Incrementë¡œ ì¸í•´ id ê°’ì˜ ì»¬ëŸ¼ì´ ë³„ë„ë¡œ ì§€ì†ì ìœ¼ë¡œ ì¶”ê°€ë˜ê¸° ë•Œë¬¸ì— <span style="background-color:#DCFFE4">**ë§‰ëŒ€í•œ ìˆ«ìì˜ ë¶ˆí•„ìš”í•œ ID ê°’ì´ ì¦ê°€í•  ê²ƒì´ë¼ ì˜ˆìƒ**</span>ë˜ì—ˆìŠµë‹ˆë‹¤.

<br>

## ğŸ“Œ Bookmark

ë‹¤ìŒê³¼ ê°™ì´ ì—”í‹°í‹°ë¥¼ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤. ì—°ê´€ ê´€ê³„ë¥¼ ê°€ì§€ëŠ” ì—”í‹°í‹°ì˜ Idê°’ìœ¼ë¡œ Bookmark ì—”í‹°í‹°ì˜ id ê°’ì„ ë§Œë“¤ê³  ê° ê°ì²´ì˜ ì—°ê´€ ê´€ê³„ë¥¼ í˜•ì„±í•´ì¤ë‹ˆë‹¤. 

### ğŸˆ Entity

```java
@Entity
@Getter
@NoArgsConstructor(access = AccessLevel.PROTECTED)
@Table(name = "TBL_BOOKMARK")
public class Bookmark {

    @EmbeddedId
    private BookmarkId bookmarkId;

    @MapsId(value = "memberNo")
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "MEMBER_NO")
    private Member member;


    @MapsId(value = "postNo")
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "POST_NO")
    private Post post;

    private Bookmark (BookmarkBuilder builder) {
        this.bookmarkId = builder.bookmarkId;
        this.member = builder.member;
        this.post = builder.post;
    }

    public static BookmarkBuilder builder() {
        return new BookmarkBuilder();
    }

    public static class BookmarkBuilder {
        private BookmarkId bookmarkId;
        private Member member;
        private Post post;

        public BookmarkBuilder bookmarkId(BookmarkId bookmarkId) {
            this.bookmarkId = bookmarkId;
            return this;
        }

        public BookmarkBuilder member(Member member) {
            this.member = member;
            return this;
        }

        public BookmarkBuilder post(Post post) {
            this.post = post;
            return this;
        }

        public Bookmark build() {
            return new Bookmark(this);
        }

    }
```

### ğŸˆ Entity ID

ë‘ ê°ì²´ì˜ ID ê°’ìœ¼ë¡œ ë™ë“±ì„±/ë™ì¼ì„±ì„ íŒë‹¨í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— **`@EqualsAndHashCode`**ë¥¼ ì´ìš©í•´ ìë™ ìƒì„±í•´ì¤ë‹ˆë‹¤. **`@Comment`**ì´ìš© ì‹œì— ID í´ë˜ìŠ¤ì— ì ì–´ì£¼ì–´ì•¼ ì‹¤ì œ DB ì¿¼ë¦¬ì— í¬í•¨ë©ë‹ˆë‹¤.

ë˜í•œ, **`Serializable`** ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ëŠ” **[JPA í‘œì¤€ ìŠ¤í™ì— ëª¨ë“  ì—”í‹°í‹°ëŠ” Serializableì„ êµ¬í˜„í•´ì•¼ í•œë‹¤](https://www.inflearn.com/questions/16570/%EB%B2%84%EA%B7%B8-%EB%AC%B8%EC%9D%98%EB%93%9C%EB%A0%A4%EB%B4%85%EB%8B%88%EB%8B%A4)**ëŠ” ê¸€ì„ ë³´ê³  ë‚˜ì„œ ìƒì† ë°›ì•˜ìŠµë‹ˆë‹¤. ìì„¸í•œ ì´ìœ ëŠ” ë‹¤ìŒ ê¸€ì—ì„œ ì •ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.

```java
@Getter
@EqualsAndHashCode
@Embeddable
@NoArgsConstructor(access = AccessLevel.PROTECTED)
@AllArgsConstructor
public class   BookmarkId implements Serializable {

    @Comment("ë©¤ë²„ ë²ˆí˜¸")
    private Long memberNo;

    @Comment("ê²Œì‹œë¬¼ ë²ˆí˜¸")
    private Long postNo;

    public static BookmarkId of (Long memberNo, Long postNo) {
        return new BookmarkId(memberNo, postNo);
    }
}

```

<br>

## ğŸ“Œ ë³µí•© í‚¤ ID ê°’ì„ ì´ìš©í•œ ì¡°íšŒ

ì œê°€ ë¶ë§ˆí¬ ë„ë©”ì¸ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë˜ ì¤‘ì— ë°œê²¬í•œ ì¼ì…ë‹ˆë‹¤.
ì´ì „ì˜ í”„ë¡œì íŠ¸ë“¤ì—ì„œëŠ” JPA ì—°ê´€ ê´€ê³„ê°€ ì•„ë‹Œ. í…Œì´ë¸” Id ê°’ì„ ì—”í‹°í‹°ì— í¬í•¨ ì‹œí‚¨ ë„ë©”ì¸ ê°„ ì˜ì¡´ì„±ì„ ë°°ì œí•œ í˜•ì‹ì˜ JPAë¥¼ ì‚¬ìš©í–ˆì—ˆëŠ”ë°ìš”.. ê·¸ë ‡ë‹¤ë³´ë‹ˆ ìŠµê´€ì ìœ¼ë¡œ ì—”í‹°í‹° ì‚­ì œë¥¼ í•  ë•Œ idê°’ìœ¼ë¡œ ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•´ ì˜¨ í›„ì— í•´ë‹¹ ì—”í‹°í‹°ë¥¼ ì‚­ì œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆì—ˆìŠµë‹ˆë‹¤.

### ğŸˆ ê¸°ì¡´ Delete Method

#### BookmarkService

```java
    @Transactional
    public void deleteBookmark(Long memberNo, Long postNo) {

        Bookmark bookmark =
                bookmarkRepository.findBookmarkByBookmarkId_MemberNoAndBookmarkId_PostNo(memberNo, postNo);
        bookmarkRepository.deleteById(bookmark.getBookmarkId());
    }
```

<br>

#### BookmarkRepository

```java
public interface BookmarkRepository extends JpaRepository<Bookmark, BookmarkId> {

    Bookmark findBookmarkByBookmarkId_MemberNoAndBookmarkId_PostNo(Long memberNo, Long postNo);
}

```

ê²°ê³¼ëŠ” ì˜ ë‚˜ì˜¤ê³  Optional ì„¤ì •ì„ í•˜ë©´ ì˜ˆì™¸ ì²˜ë¦¬ë„ ê°€ëŠ¥í• ê²ë‹ˆë‹¤. í•˜ì§€ë§Œ, ê°ì²´ ì˜ì¡´ì ìœ¼ë¡œ ì¡°íšŒí•˜ëŠ” ê²ƒì´ ì•„ë‹Œ í…Œì´ë¸”ì— ì˜ì¡´ì ì¸ ì¡°íšŒë¼ê³  ìƒê°ë©ë‹ˆë‹¤.

```
Hibernate: 
    select
        b1_0.MEMBER_NO,
        b1_0.POST_NO,
        b1_0.member_no,
        b1_0.post_no 
    from
        tbl_bookmark b1_0 
    where
        b1_0.MEMBER_NO=? 
        and b1_0.POST_NO=?
Hibernate: 
    delete 
    from
        tbl_bookmark 
    where
        MEMBER_NO=? 
        and POST_NO=?
```

ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œëŠ” JPA ì—°ê´€ ê´€ê³„ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ë³µí•© í‚¤ ID ë‚´ì— <span style="background-color:#DCFFE4">**@EqualsAndHashCode**</span>ë¥¼ í†µí•´ ê°’ì„ ì´ìš©í•˜ë©´ ë³µí•© í‚¤ë¥¼ ì´ìš©í•´ ì¡°íšŒê°€ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

### ğŸˆ ë³€ê²½ëœ Delete Method

#### BookmarkService

```java
    @Transactional
    public void deleteBookmark(Long memberNo, Long postNo) {
        Bookmark bookmark = bookmarkRepository.findById(BookmarkId.of(memberNo,postNo))
                        .orElseThrow(EntityNotFoundException::new);
        bookmarkRepository.delete(bookmark);
    }
```

#### BookmarkRepository

```java
public interface BookmarkRepository extends JpaRepository<Bookmark, BookmarkId> {

}
```

**`findById()`**, **`delete()`**ëŠ” **`JpaRepository-SimpleJpaRepository`**ì—ì„œ ìƒì†ë°›ì•„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë”°ë¡œ êµ¬í˜„í•´ì¤„ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

```
Hibernate: 
    select
        b1_0.MEMBER_NO,
        b1_0.POST_NO,
        b1_0.member_no,
        b1_0.post_no 
    from
        tbl_bookmark b1_0 
    where
        b1_0.MEMBER_NO=? 
        and b1_0.POST_NO=?
Hibernate: 
    delete 
    from
        tbl_bookmark 
    where
        MEMBER_NO=? 
        and POST_NO=?
```

Hibernateê°€ ì‘ì„±í•´ì¤€ ì¿¼ë¦¬ëŠ” ë™ì¼í•˜ê²Œ ë‚˜ê°‘ë‹ˆë‹¤. í•˜ì§€ë§Œ, VOë¡œ ë¹¼ë‘” ë³µí•© í‚¤ì˜ IDëŠ” VOì˜ **`@EqualsAndHashCode`**ë¥¼ ì´ìš©í•˜ì—¬ <span style="background-color:#DCFFE4">**ê¸°ì¡´ ì—”í‹°í‹°ì˜ ID ê°ì²´ì™€ ë™ë“±ì„±/ë™ì¼ì„±ì„ íŒë‹¨í•˜ì—¬ ê°™ì€ ê°ì²´ì¸ ê²ƒì„ íŒë‹¨í•´ì¤ë‹ˆë‹¤.**</span> ë•ë¶„ì— ID ê°ì²´ë¡œ ì¼ì¹˜í•˜ëŠ” ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.

_**ì£¼ì˜í•  ì ì€, 
ë³µí•© í‚¤ë¡œ ë“¤ì–´ê°ˆ `memberNo`, `postNo`ì— null ê°’ì„ ë„£ì–´ì£¼ë”ë¼ë„ `BookmarkId`ëŠ” nullê°’ì˜ í•„ë“œë¥¼ ê°€ì§„ ê°ì²´ê°€ ìƒì„±ë˜ë¯€ë¡œ null ì²´í‚¹ì„ í†µê³¼í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.**_


## ğŸ“Œ Delete / DeleteBy

ì—¬ê¸°ì„œ, **`deleteById`** ì•ˆì— **`findById`**ì™€ **`delete`**ê°€ ì‹¤í–‰ë˜ë‹ˆ **`deleteById`**ë¥¼ ì´ìš©í•˜ë©´ ë”ìš± ê°„ê²°í•´ì§€ëŠ” ê²ƒ ì•„ë‹ˆëƒê³  ì˜ë¬¸ì´ ë“œì‹¤í…ë°ìš”..!! 

ê²°ë¡ ë¶€í„° ë§ì”€ë“œë¦¬ë©´, ì˜ˆì™¸ ì²˜ë¦¬ ë•Œë¬¸ì— **`findByID`**ì™€ **`delete`**ë¥¼ ë”°ë¡œ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. `delete`ì™€ **`deleteById`** ë©”ì†Œë“œëŠ” ë§¤ê°œ ë³€ìˆ˜ê°€ nullì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•ŠìŠµë‹ˆë‹¤.

### ğŸˆdeleteById(SimpleJpaRepository)

```java
	@Transactional
	@Override
	public void deleteById(ID id) {

		Assert.notNull(id, ID_MUST_NOT_BE_NULL);

		findById(id).ifPresent(this::delete);
	}
```

ìœ„ì²˜ëŸ¼ deleteByIdì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•  ìš”ì†ŒëŠ” 

 - **`Assert.NotNull`**, id ê°’ì´ nullì´ë©´ <span style="background-color:#DCFFE4">**IllegalArgumentException**</span> ë°œìƒ

 >#### Assert.NotNull
 >
 >```java
 >public static void notNull(@Nullable Object object, String message) {
 >	if (object == null) {
 >		throw new IllegalArgumentException(message);
 >	}
 >}
 >```
 >
 >=> ë³µí•© í‚¤ í˜¹ì€ ê´€ë ¨ ì—†ëŠ” id ê°’ì´ ë“¤ì–´ê°€ ìˆë‹¤ë©´ ê°€ë³ê²Œ í†µê³¼í•©ë‹ˆë‹¤!

 - **`Optional.ifPresent`**ì— ì˜í•œ <span style="background-color:#DCFFE4">**NPE**</span>
   => this::deleteë€ actionì„ ì „ë‹¬í•´ì£¼ê¸° ë•Œë¬¸ì— ì˜ˆì™¸ ë°œìƒx

ì…ë‹ˆë‹¤. **`findById`**ëŠ” ì™œ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•ŠëŠ” ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.


#### findById(SimpleJpaRepository)

```java
	@Override
	public Optional<T> findById(ID id) {

		Assert.notNull(id, ID_MUST_NOT_BE_NULL); // idê°€ nullì´ì—ˆë‹¤ë©´, deleteByIdì—ì„œ ë¯¸ë¦¬ NPE ë°œìƒí•©ë‹ˆë‹¤.

		Class<T> domainType = getDomainClass();

		if (metadata == null) {
			return Optional.ofNullable(entityManager.find(domainType, id));
		}

		LockModeType type = metadata.getLockModeType();
		Map<String, Object> hints = getHints();

		return Optional.ofNullable(type == null ? entityManager.find(domainType, id, hints) : entityManager.find(domainType, id, type, hints));
	}
```

**`findById`**ì—ì„œëŠ” **`Optional.ofNullable`**ì„ í†µí•´ì„œ **`entityManager.find`** ê°’ì´ nullì´ ë‚˜ì˜¨ë‹¤ë©´ NPE ëŒ€ì‹  **`Optional[]`**(Optional.empty)ì„ ë°˜í™˜í•´ì¤ë‹ˆë‹¤.

#### Optional.ifPresent

```java
    /**
     * If a value is present, performs the given action with the value,
     * otherwise does nothing.
     *
     * @param action the action to be performed, if a value is present
     * @throws NullPointerException if value is present and the given action is
     *         {@code null}
     * = valueê°€ ìˆëŠ”ë° actionì´ ë¹„ì—ˆë‹¤? => NPE ë°œìƒ
     */
    public void ifPresent(Consumer<? super T> action) {
        if (value != null) {
            action.accept(value);
        }
    }
```

**`findById`** ê°’ì´ **`Optional`**ë¡œ ë°˜í™˜ë˜ê³ , **`ifPresent`**ë¡œ ë„˜ì–´ê°€ê²Œ ë©ë‹ˆë‹¤. í•´ë‹¹ ë©”ì†Œë“œëŠ” NPEë¥¼ ë°œìƒí•˜ëŠ” ì¡°ê±´ì€ ìœ ì¼í•©ë‹ˆë‹¤.

>ğŸš¨ **"valueê°’ì´ ì¡´ì¬í•˜ì§€ë§Œ(not null) actionì„ ë„˜ê²¨ì£¼ì§€ ì•Šì•˜ë‹¤ë©´ NullPointExceptionì„ ë°œìƒ"**

ê·¸ ì™¸ì—”, 

- **value ê°’ì´ ë¹„ì—ˆë‹¤ë©´, <span style="background-color:#DCFFE4">actionì„ ì‹¤í–‰ì‹œí‚¤ì§€ ì•Šê³  ë©”ì†Œë“œ ì¢…ë£Œ.</span>**
- **value ê°’ì´ ì¡´ì¬í•œë‹¤ë©´, actionì„ ì‹¤í–‰.**

ì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë³´ë‹ˆ **`findById`**ì—ì„œ ë¹ˆ Optional ê°ì²´ë¥¼ ë°˜í™˜í•´ì¤€ë‹¤ë©´ ì•„ë¬´ ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•Šê³  ë©”ì†Œë“œê°€ ì¢…ë£Œë©ë‹ˆë‹¤. 

>ğŸ‰ **ë”°ë¼ì„œ!!
>`deleteById`ëŠ” `ì¡´ì¬í•˜ì§€ ì•ŠëŠ” id`ì„ ì‚¬ìš©í•œë‹¤ë©´!!
><span style="background-color:#DCFFE4">deleteë¥¼ ì‹¤í–‰í•˜ì§€ë„ ëª»í•˜ê³ , ì˜ˆì™¸ë„ ë°œìƒí•˜ì§€ ì•Šì£ .**</span>
>
>**`deleteById`**ê°€ ì˜ˆì™¸ë¥¼ ë°œìƒí•˜ë ¤ë©´ ë§¤ê°œë³€ìˆ˜ì¸ **`id`**ê°’ì´ nullì´ì–´ì•¼ í•©ë‹ˆë‹¤.
>í•˜ì§€ë§Œ, ìœ„ì²˜ëŸ¼ ë³µí•© í‚¤ idê°€ ëª¨ë‘ nullì´ì–´ë„ ID ê°ì²´ ìì²´ëŠ” nullì´ ì•„ë‹ˆë¯€ë¡œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.


ê·¸ëŸ¬ë©´ **`delete`**ì—ì„  ì™œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•Šì„ê¹Œìš”?

### ğŸˆdelete

```java
	@Override
	@Transactional
	@SuppressWarnings("unchecked")
	public void delete(T entity) {

		Assert.notNull(entity, "Entity must not be null");

		if (entityInformation.isNew(entity)) {
			return;	// ìƒˆë¡œìš´ ê°ì²´ì•¼? ê·¸ëƒ¥ ì‚­ì œ = dbì— ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ
		}

		Class<?> type = ProxyUtils.getUserClass(entity);

		T existing = (T) entityManager.find(type, entityInformation.getId(entity));

		// if the entity to be deleted doesn't exist, delete is a NOOP
		if (existing == null) {
			return; // dbì— ì¡´ì¬í•˜ì§€ ì•Šë‹¤êµ¬? ê·¸ëŸ¼ ì‚­ì œëœê±°ì§€.
		}

		entityManager.remove(entityManager.contains(entity) ? entity : entityManager.merge(entity));
	}
    
    /* entityInformation.isNew */
    /**
	 * Returns whether the given entity is considered to be new.
	 *
	 * @param entity must never be {@literal null}
	 * @return
	 */
	boolean isNew(T entity);
    

```

ì‹¤ì§ˆì ì¸ ì‚­ì œê°€ ì¼ì–´ë‚˜ëŠ” **`delete`**ë©”ì†Œë“œì—ì„ , entityì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ì´ìš©í•´ ì´ê²ƒì´ **`ìƒˆë¡œìš´ ì—”í‹°í‹°ì¸ì§€ / null ê°’ì€ ì•„ë‹Œ ì§€`** ì²´í¬í•´ì¤ë‹ˆë‹¤. 

ê·¸ë¦¬ê³  **`entityManager.find`**ë¥¼ í†µí•´ ë‹¤ì‹œ í•œë²ˆ í˜„ì¬ DB ìƒì— ì¡´ì¬í•˜ëŠ” Entityì¸ ì§€ í™•ì¸í•´ì¤ë‹ˆë‹¤. nullì¼ ì‹œ NPE ë°œìƒì´ ì•„ë‹ˆë¼ ë©”ì†Œë“œë¥¼ ì¢…ë£Œì‹œí‚µë‹ˆë‹¤.

<br>

## ğŸ“Œ ì‹¤ì œ í…ŒìŠ¤íŠ¸

**`deleteById`**ì™€ **`delete`**ì˜ ì‹¤í–‰ì´ ì–´ë–»ê²Œ ë˜ëŠ” ì§€ ìì„¸íˆ ì•Œì•„ë³´ë©° ì˜ˆì™¸ ë°œìƒ
ì—¬ê¸°ì„œ ë¬¸ì œê°€ ë˜ëŠ” ê²Œ ë³µí•© í‚¤ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ **`memberNo`**ì™€ **`postNo`**ê°€ nullê°’ì´ë‚˜ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê°’ì´ë¼ë„ ID ê°ì²´ëŠ” ìƒì„±ë˜ê²Œ ë©ë‹ˆë‹¤. ì´ ìƒíƒœì—ì„œ **`deleteById`** ë©”ì†Œë“œì— ë“¤ì–´ê°€ê²Œ ëœë‹¤ë©´ **`findById`** ë©”ì†Œë“œì—ì„œ ë°˜í™˜ëœ Optional.empty ê°’ìœ¼ë¡œ **`ifPresent`**ì—ì„œ ê°’ì´ ì¡´ì¬í•˜ì§€ ì•Šì•„ ë‹¤ìŒ ì•¡ì…˜ì¸ **`delete`**ë¥¼ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ” ê²ƒì…ë‹ˆë‹¤. 

### ğŸˆdeleteById í…ŒìŠ¤íŠ¸

```java
 	@ParameterizedTest
    @DisplayName("ë¶ë§ˆí¬ ì‚­ì œ í…ŒìŠ¤íŠ¸ : ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë©¤ë²„ë‚˜ ê²Œì‹œê¸€ ê°’ì¼ ì‹œ Hibernateì—ì„œ selectë§Œ ì‹¤í–‰ì‹œí‚¤ëŠ” ì§€ í™•ì¸")
    @CsvSource(value = {"0, 0", "null, null"}, nullValues = "null")
    void testDeleteBookmarkHibernate(Long memberNo, Long postNo) {

        bookmarkRepository.deleteById(BookmarkId.of(memberNo, postNo));
	}
```

<br>

#### ê²°ê³¼![](/Users/kimjong-wan/workspace/Blog/TodayILearned/images/á„‡á…©á†¨á„’á…¡á†¸ á„á…µ á„‹á…µá„‹á…­á†¼ á„‰á…µ á„Œá…®á„‹á…´á„‰á…¡á„’á…¡á†·/image-20240323234914229.png)

<br>



### delete í…ŒìŠ¤íŠ¸

```java
 	@ParameterizedTest
    @DisplayName("ë¶ë§ˆí¬ ì‚­ì œ í…ŒìŠ¤íŠ¸ : ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë©¤ë²„ë‚˜ ê²Œì‹œê¸€ ê°’ì¼ ì‹œ Hibernateì—ì„œ selectë§Œ ì‹¤í–‰ì‹œí‚¤ëŠ” ì§€ í™•ì¸")
    @CsvSource(value = {"0, 0", "null, null"}, nullValues = "null")
    void testDeleteBookmarkHibernate(Long memberNo, Long postNo) {
    
        Bookmark bookmark = Bookmark.builder()
                    .bookmarkId(BookmarkId.of(memberNo, postNo))
                    .post(null)
                    .member(null)
                    .build();

        bookmarkRepository.delete(bookmark);
  }
```

#### ê²°ê³¼![](/Users/kimjong-wan/workspace/Blog/TodayILearned/images/á„‡á…©á†¨á„’á…¡á†¸ á„á…µ á„‹á…µá„‹á…­á†¼ á„‰á…µ á„Œá…®á„‹á…´á„‰á…¡á„’á…¡á†·/image-20240323234913226.png)

ê²°ê³¼ì—ì„œì²˜ëŸ¼ HibernateëŠ” selectë§Œ ì‹¤í–‰ì‹œí‚¤ê³  ë©”ì†Œë“œë¥¼ ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤.


## âœ¨ í•´ê²° ë°©ì•ˆ

**`deleteById`**ì™€ **`delete`**ì˜ ì‹¤í–‰ì´ ì–´ë–»ê²Œ ë˜ëŠ” ì§€ ìì„¸íˆ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.

ë³µí•© í‚¤ ì‚¬ìš© ì‹œ null ì²´í‚¹ì„ ëª»í•˜ê¸° ë•Œë¬¸ì— VO ìƒì„± ë‹¹ì‹œì— í•„ë“œ null ê°’ì„ ì²´í¬ê°€ í•„ìš”í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ë˜í•œ, ì œê°€ êµ¬í˜„í•œ ëŒ€ë¡œ **`findById`**ì™€ **`delete`**ë¥¼ ë‚˜ëˆ ì„œ ì‹¤í–‰í•˜ë©´ ì˜ˆì™¸ í•¸ë“¤ë§ë„ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— í° ì–´ë ¤ì›€ ì—†ì´ í•´ê²°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤!