## FCM 알림 종류
### 푸쉬 알림
- 전달 방식: 디바이스 시스템 레벨에서 처리되며, 앱이 백그라운드 상태이거나 종료되어 있어도 수신 가능
- 표시 위치: 주로 디바이스의 알림 센터나 잠금 화면에 표시됨
- 사용자 상호작용: 사용자가 알림을 탭하면 앱이 열리거나 특정 화면으로 이동
- 구현 방식: FCM을 통해 서버에서 클라이언트로 직접 전송
- 주요 용도: 중요한 업데이트, 새로운 메시지 알림 등 사용자의 즉각적인 주의가 필요한 경우
### 인 앱 메세지
- 전달 방식: 앱이 포그라운드 상태일 때만 표시됨
- 표시 위치: 앱 내부에서 팝업, 배너, 모달 등의 형태로 표시
- 사용자 상호작용: 앱 사용 중에 실시간으로 메시지를 받고 상호작용
- 구현 방식: Firebase In-App Messaging SDK를 통해 클라이언트 앱에서 직접 처리
- 주요 용도: 사용자 행동 기반 프로모션, 피드백 요청, 새 기능 안내 등

### 구현될 알림 종류
- 피드 댓글 알림
- 문의 답변 알림
- 레벨 업 알림

## 전체 아키텍처 및 플로우:

### a.  iOS 앱:
- FCM SDK 통합
- 앱 시작 시 FCM 토큰 획득 및 서버로 전송
- 알림 수신 및 표시 처리

### b. Spring 서버:

- Firebase Admin SDK 통합
- 사용자별 FCM 토큰 관리
- 알림 발생 조건 모니터링 및 알림 생성
- FCM을 통한 알림 전송

### c. Firebase Cloud Messaging:
- iOS 앱과 Spring 서버 사이의 중개자 역할


## 상세 구현 단계:
### a. iOS 앱 구현:
- FCM SDK를 프로젝트에 추가
- AppDelegate에서 FCM 설정 및 토큰 획득 로직 구현
- 획득한 FCM 토큰을 서버로 전송하는 API 호출 구현
- 알림 수신 시 처리할 로직 구현 (앱 foreground/background 상태 고려)
- 알림 탭 시 해당 컨텐츠로 이동하는 딥링크 처리

### b. Spring 서버 구현:

- Firebase Admin SDK 의존성 추가 및 초기화
- 사용자 - FCM 토큰 매핑 테이블 설계 및 구현
- 각 알림 유형별 발생 조건 모니터링 로직 구현:
	- 댓글 작성 시 게시물 작성자에게 알림
	- 문의 답변 등록 시 문의자에게 알림
	- 사용자 경험치 변경 시 레벨업 체크 및 알림
	- 챌린지 종료 시 1등 달성자 확인 및 알림


FCM 메시지 생성 및 전송 로직 구현


```json
{
  "alarmId": 1,
  "title": "새로운 댓글이 달렸습니다",
  "alarmType": "REPLY",
  "targetPage": "POST",
  "targetId": 30,
  "isRead": false,
  "createDate": "2024-06-01T00:00:00"
}
```